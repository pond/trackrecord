<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>class WorkPacket - Rails Application Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/models/work_packet.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">ActiveRecord::Base
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-find_by_task_user_and_range">::find_by_task_user_and_range</a>
    
    <li><a href="#method-c-find_by_task_user_range_and_committed">::find_by_task_user_range_and_committed</a>
    
    <li><a href="#method-c-find_committed_by_task_user_and_range">::find_committed_by_task_user_and_range</a>
    
    <li><a href="#method-c-find_earliest_by_tasks">::find_earliest_by_tasks</a>
    
    <li><a href="#method-c-find_first_by_tasks_and_order">::find_first_by_tasks_and_order</a>
    
    <li><a href="#method-c-find_latest_by_tasks">::find_latest_by_tasks</a>
    
    <li><a href="#method-c-find_not_committed_by_task_user_and_range">::find_not_committed_by_task_user_and_range</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./TrackRecordReport.html">TrackRecordReport</a>
  
    <li><a href="./TrackRecordReport/Report.html">TrackRecordReport::Report</a>
  
    <li><a href="./TrackRecordReport/ReportCell.html">TrackRecordReport::ReportCell</a>
  
    <li><a href="./TrackRecordReport/ReportColumnTotal.html">TrackRecordReport::ReportColumnTotal</a>
  
    <li><a href="./TrackRecordReport/ReportElementaryCalculator.html">TrackRecordReport::ReportElementaryCalculator</a>
  
    <li><a href="./TrackRecordReport/ReportRow.html">TrackRecordReport::ReportRow</a>
  
    <li><a href="./TrackRecordReport/ReportSection.html">TrackRecordReport::ReportSection</a>
  
    <li><a href="./TrackRecordReport/ReportUserColumnTotal.html">TrackRecordReport::ReportUserColumnTotal</a>
  
    <li><a href="./TrackRecordReport/ReportUserData.html">TrackRecordReport::ReportUserData</a>
  
    <li><a href="./TrackRecordReport/ReportUserRowTotal.html">TrackRecordReport::ReportUserRowTotal</a>
  
    <li><a href="./ReportsHelper.html">ReportsHelper</a>
  
    <li><a href="./ReportsHelper/ReportMonth.html">ReportsHelper::ReportMonth</a>
  
    <li><a href="./ReportsHelper/ReportWeek.html">ReportsHelper::ReportWeek</a>
  
    <li><a href="./ReportsHelper/ReportYear.html">ReportsHelper::ReportYear</a>
  
    <li><a href="./QuietLeightbox.html">QuietLeightbox</a>
  
    <li><a href="./QuietLeightbox/ClassMethods.html">QuietLeightbox::ClassMethods</a>
  
    <li><a href="./QuietLeightbox/QuietLeightboxHelper.html">QuietLeightbox::QuietLeightboxHelper</a>
  
    <li><a href="./QuietPrototype.html">QuietPrototype</a>
  
    <li><a href="./QuietPrototype/ClassMethods.html">QuietPrototype::ClassMethods</a>
  
    <li><a href="./QuietPrototype/QuietPrototypeHelper.html">QuietPrototype::QuietPrototypeHelper</a>
  
    <li><a href="./YuiTree.html">YuiTree</a>
  
    <li><a href="./YuiTree/ClassMethods.html">YuiTree::ClassMethods</a>
  
    <li><a href="./YuiTree/YuiTreeHelper.html">YuiTree::YuiTreeHelper</a>
  
    <li><a href="./SafeInPlaceEditing.html">SafeInPlaceEditing</a>
  
    <li><a href="./SafeInPlaceEditing/ClassMethods.html">SafeInPlaceEditing::ClassMethods</a>
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./AuditsController.html">AuditsController</a>
  
    <li><a href="./AuditsHelper.html">AuditsHelper</a>
  
    <li><a href="./ChartsController.html">ChartsController</a>
  
    <li><a href="./ChartsHelper.html">ChartsHelper</a>
  
    <li><a href="./ControlPanel.html">ControlPanel</a>
  
    <li><a href="./ControlPanelsController.html">ControlPanelsController</a>
  
    <li><a href="./Customer.html">Customer</a>
  
    <li><a href="./CustomersController.html">CustomersController</a>
  
    <li><a href="./CustomersHelper.html">CustomersHelper</a>
  
    <li><a href="./EmailNotifier.html">EmailNotifier</a>
  
    <li><a href="./HelpController.html">HelpController</a>
  
    <li><a href="./HelpHelper.html">HelpHelper</a>
  
    <li><a href="./Project.html">Project</a>
  
    <li><a href="./ProjectsController.html">ProjectsController</a>
  
    <li><a href="./ProjectsHelper.html">ProjectsHelper</a>
  
    <li><a href="./Rangeable.html">Rangeable</a>
  
    <li><a href="./ReportsController.html">ReportsController</a>
  
    <li><a href="./SafeInPlaceEditingHelper.html">SafeInPlaceEditingHelper</a>
  
    <li><a href="./SavedReport.html">SavedReport</a>
  
    <li><a href="./SavedReportAutoTitlesController.html">SavedReportAutoTitlesController</a>
  
    <li><a href="./SavedReportsBaseController.html">SavedReportsBaseController</a>
  
    <li><a href="./SavedReportsByCustomerController.html">SavedReportsByCustomerController</a>
  
    <li><a href="./SavedReportsByProjectController.html">SavedReportsByProjectController</a>
  
    <li><a href="./SavedReportsByTaskController.html">SavedReportsByTaskController</a>
  
    <li><a href="./SavedReportsByUserController.html">SavedReportsByUserController</a>
  
    <li><a href="./SavedReportsController.html">SavedReportsController</a>
  
    <li><a href="./SavedReportsHelper.html">SavedReportsHelper</a>
  
    <li><a href="./SessionsController.html">SessionsController</a>
  
    <li><a href="./Task.html">Task</a>
  
    <li><a href="./TaskGroup.html">TaskGroup</a>
  
    <li><a href="./TaskImport.html">TaskImport</a>
  
    <li><a href="./TaskImportsController.html">TaskImportsController</a>
  
    <li><a href="./TaskImportsHelper.html">TaskImportsHelper</a>
  
    <li><a href="./TasksController.html">TasksController</a>
  
    <li><a href="./TasksHelper.html">TasksHelper</a>
  
    <li><a href="./Timesheet.html">Timesheet</a>
  
    <li><a href="./TimesheetRow.html">TimesheetRow</a>
  
    <li><a href="./TimesheetRowsController.html">TimesheetRowsController</a>
  
    <li><a href="./TimesheetRowsHelper.html">TimesheetRowsHelper</a>
  
    <li><a href="./TimesheetsController.html">TimesheetsController</a>
  
    <li><a href="./TimesheetsHelper.html">TimesheetsHelper</a>
  
    <li><a href="./TrackRecordSections.html">TrackRecordSections</a>
  
    <li><a href="./TreesController.html">TreesController</a>
  
    <li><a href="./User.html">User</a>
  
    <li><a href="./UsersController.html">UsersController</a>
  
    <li><a href="./UsersHelper.html">UsersHelper</a>
  
    <li><a href="./WorkPacket.html">WorkPacket</a>
  
    <li><a href="./WorkPacketsController.html">WorkPacketsController</a>
  
    <li><a href="./WorkPacketsHelper.html">WorkPacketsHelper</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class WorkPacket</h1>

  <div id="description" class="description">
    <dl class="rdoc-list note-list"><dt>File
<dd>
<p>work_packet.rb</p>
</dd><dt>(C)
<dd>
<p>Hipposoft 2007</p>
</dd><dt>Purpose
<dd>
<p>Describe the behaviour of <a href="WorkPacket.html">WorkPacket</a> objects.
See below for more details.</p>
</dd></dl>
<hr style="height: 10px">

<pre>24-Dec-2007 (ADH): Created.</pre>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-find_by_task_user_and_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_by_task_user_and_range</span><span
            class="method-args">( range, task_id = nil, user_id = nil )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Find work packets in rows related to the given task ID, held in timesheets
owned by the given user ID, between the Dates in the given range. The range
MUST be inclusive, for reasons discussed below. The results are sorted by
work packet date, descending.</p>

<p>The task and user IDs are optional. All tasks and/or users will be included
in the count if the given task and/or user ID is nil. The date range is
mandatory.</p>

<p>IMPORTANT - at the time of writing, Rails 2.1 (and earlier versions) will
build a BETWEEN statement in SQL with the given range. Although SQL says
that the values on either side of BETWEEN should be treated as inclusive,
i.e. a Ruby “a..b” kind of range, some databases may treat the right side
as exclusive; PostgreSQL is fine, but if in doubt you need to go to the
Rails console and run a test. For example, issue something like this:</p>

<pre class="ruby"><span class="ruby-constant">User</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">id</span> }.<span class="ruby-identifier">sort</span>
</pre>

<p>Note any two consecutive IDs listed - e.g. “[1, 2, …]” - 1 and 2 will do.
Use these as part of range conditions for a find:</p>

<pre class="ruby"><span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">all</span>, :<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">2</span> } )
</pre>

<p>Assuming you actually <strong>have</strong> users with IDs 1 and 2, then
both should be returned. If you only get one, BETWEEN isn’t working and you
need to use another database or change the function below to do something
else (e.g. hard-code a condition using “&gt;=” and “&lt;=” if your database
supports those operators).</p>

<p>A final twist is that Rails’ “to_s( :db )” operator assumes all ranges are
inclusive and generates SQL accordingly. There’s a ticket for this in the
case of dates:</p>

<pre>http://dev.rubyonrails.org/ticket/8549</pre>

<p>…but actually Rails seems to do this for any kind of range - e.g. change
the “1..2” to “1…2” in the <a href="User.html">User</a> find above and note
that the generated SQL is the same. We’d expect it to only look for a user
with id ‘1’ (or between 1 and 1) in this case.</p>

<p>As a result, ensure you only ever pass inclusive ranges to this function.</p>
          

          
          <div class="method-source-code" id="find_by_task_user_and_range-source">
            <pre><span class="ruby-comment"># File app/models/work_packet.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_by_task_user_and_range</span>( <span class="ruby-identifier">range</span>, <span class="ruby-identifier">task_id</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_id</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">find_by_task_user_range_and_committed</span>(
    <span class="ruby-identifier">range</span>,
    <span class="ruby-keyword">nil</span>,
    <span class="ruby-identifier">task_id</span>,
    <span class="ruby-identifier">user_id</span>
  )
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_by_task_user_and_range-source -->
          
        </div>

        

        
      </div><!-- find_by_task_user_and_range-method -->

    
      <div id="method-c-find_by_task_user_range_and_committed" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_by_task_user_range_and_committed</span><span
            class="method-args">( range, committed, task_id = nil, user_id = nil )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Support <a
href="WorkPacket.html#method-c-find_by_task_user_and_range">::find_by_task_user_and_range</a>,
<a
href="WorkPacket.html#method-c-find_committed_by_task_user_and_range">::find_committed_by_task_user_and_range</a>
and find_not_committed_by_task_user_and_range. An extra mandatory second
parameter must be set to ‘true’ to only include work packets from committed
timesheets, ‘false’ for not committed timesheets and ‘nil’ for either.</p>
          

          
          <div class="method-source-code" id="find_by_task_user_range_and_committed-source">
            <pre><span class="ruby-comment"># File app/models/work_packet.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_by_task_user_range_and_committed</span>( <span class="ruby-identifier">range</span>, <span class="ruby-identifier">committed</span>, <span class="ruby-identifier">task_id</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_id</span> = <span class="ruby-keyword">nil</span> )

  <span class="ruby-comment"># The 'include' part needs some explanation. We include the timesheet rows,</span>
  <span class="ruby-comment"># a second order association, because the rows lead to tasks and timesheets.</span>
  <span class="ruby-comment"># We need to eager-load tasks because the search is limited by task ID. We</span>
  <span class="ruby-comment"># need to eager-load timesheets because they lead to users and the search is</span>
  <span class="ruby-comment"># also limited by user ID. Rails supports eager-loading of third and deeper</span>
  <span class="ruby-comment"># order associations through passing hashes in as the value to &quot;:include&quot;.</span>
  <span class="ruby-comment"># Each key's value is the next level of association. So :timesheet_row is</span>
  <span class="ruby-comment"># at the second order, pointing to an array giving two third order things;</span>
  <span class="ruby-comment"># :task and, itself a hash key, :timesheet; since it is a hash key,</span>
  <span class="ruby-comment"># :timesheet's value is the second-order association of timesheets, or the</span>
  <span class="ruby-comment"># fourth-order association of the work packets - :user.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># Ultimately eager-loading means LEFT OUTER JOIN in SQL statements. Due to</span>
  <span class="ruby-comment"># the way that ActiveRecord assembles the query, using :include rather than</span>
  <span class="ruby-comment"># :joins with some hard-coded SQL makes for a very verbose query in the</span>
  <span class="ruby-comment"># &quot;find&quot; case; it's nice and compact for &quot;sum&quot;, though. In any event, at</span>
  <span class="ruby-comment"># least it is a query generated entirely through the database adapter, so</span>
  <span class="ruby-comment"># it stands a fighting chance of working fine on multiple database types.</span>

  <span class="ruby-identifier">conditions</span> = { <span class="ruby-value">:date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">range</span> }
  <span class="ruby-identifier">conditions</span>[ <span class="ruby-string">'tasks.id'</span> ] = <span class="ruby-identifier">task_id</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">task_id</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">conditions</span>[ <span class="ruby-string">'users.id'</span> ] = <span class="ruby-identifier">user_id</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">user_id</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">conditions</span>[ <span class="ruby-string">'timesheets.committed'</span> ] = <span class="ruby-identifier">committed</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">committed</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">all</span>(
    <span class="ruby-value">:include</span>     =<span class="ruby-operator">&gt;</span> { <span class="ruby-value">:timesheet_row</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value">:task</span>, { <span class="ruby-value">:timesheet</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:user</span> } ] },
    <span class="ruby-value">:conditions</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">conditions</span>,
    <span class="ruby-value">:order</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'date DESC'</span>
  )

<span class="ruby-keyword">end</span></pre>
          </div><!-- find_by_task_user_range_and_committed-source -->
          
        </div>

        

        
      </div><!-- find_by_task_user_range_and_committed-method -->

    
      <div id="method-c-find_committed_by_task_user_and_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_committed_by_task_user_and_range</span><span
            class="method-args">( range, task_id = nil, user_id = nil )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>As <a
href="WorkPacket.html#method-c-find_by_task_user_and_range">::find_by_task_user_and_range</a>,
but only counts work packets belonging to committed timesheets.</p>
          

          
          <div class="method-source-code" id="find_committed_by_task_user_and_range-source">
            <pre><span class="ruby-comment"># File app/models/work_packet.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_committed_by_task_user_and_range</span>( <span class="ruby-identifier">range</span>, <span class="ruby-identifier">task_id</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_id</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-comment"># TODO: Use with_scope? Can we cope with the 'nil' case cleanly?</span>

  <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">find_by_task_user_range_and_committed</span>(
    <span class="ruby-identifier">range</span>,
    <span class="ruby-keyword">true</span>,
    <span class="ruby-identifier">task_id</span>,
    <span class="ruby-identifier">user_id</span>
  )
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_committed_by_task_user_and_range-source -->
          
        </div>

        

        
      </div><!-- find_committed_by_task_user_and_range-method -->

    
      <div id="method-c-find_earliest_by_tasks" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_earliest_by_tasks</span><span
            class="method-args">( task_ids = [] )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return the earliest (first by date) work packet, either across all tasks
(pass nothing) or for the given tasks specified as an array of task IDs.
The work packet may be in either a not committed or committed timesheet.</p>
          

          
          <div class="method-source-code" id="find_earliest_by_tasks-source">
            <pre><span class="ruby-comment"># File app/models/work_packet.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_earliest_by_tasks</span>( <span class="ruby-identifier">task_ids</span> = [] )
  <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">find_first_by_tasks_and_order</span>( <span class="ruby-identifier">task_ids</span>, <span class="ruby-string">'date ASC'</span> )
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_earliest_by_tasks-source -->
          
        </div>

        

        
      </div><!-- find_earliest_by_tasks-method -->

    
      <div id="method-c-find_first_by_tasks_and_order" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_first_by_tasks_and_order</span><span
            class="method-args">( task_ids, order )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Support <a
href="WorkPacket.html#method-c-find_earliest_by_tasks">::find_earliest_by_tasks</a>
and find_latest_by_tasks. Pass an array of task IDs and a sort order (SQL
fragment, e.g. “date ASC”).</p>
          

          
          <div class="method-source-code" id="find_first_by_tasks_and_order-source">
            <pre><span class="ruby-comment"># File app/models/work_packet.rb, line 185</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_first_by_tasks_and_order</span>( <span class="ruby-identifier">task_ids</span>, <span class="ruby-identifier">order</span> )
  <span class="ruby-keyword">if</span> ( <span class="ruby-identifier">task_ids</span>.<span class="ruby-identifier">empty?</span> )
    <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">significant</span>.<span class="ruby-identifier">first</span>( <span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">order</span> )
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">significant</span>.<span class="ruby-identifier">first</span>(
      <span class="ruby-value">:include</span>    =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value">:timesheet_row</span> ],
      <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-string">'timesheet_rows.task_id IN (?)'</span>, <span class="ruby-identifier">task_ids</span> ],
      <span class="ruby-value">:order</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">order</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_first_by_tasks_and_order-source -->
          
        </div>

        

        
      </div><!-- find_first_by_tasks_and_order-method -->

    
      <div id="method-c-find_latest_by_tasks" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_latest_by_tasks</span><span
            class="method-args">( task_ids = [] )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return the latest (last by date) work packet, either across all tasks (pass
nothing) or for the given tasks specified as an array of task IDs. The work
packet may be in either a not committed or committed timesheet.</p>
          

          
          <div class="method-source-code" id="find_latest_by_tasks-source">
            <pre><span class="ruby-comment"># File app/models/work_packet.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_latest_by_tasks</span>( <span class="ruby-identifier">task_ids</span> = [] )
  <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">find_first_by_tasks_and_order</span>( <span class="ruby-identifier">task_ids</span>, <span class="ruby-string">'date DESC'</span> )
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_latest_by_tasks-source -->
          
        </div>

        

        
      </div><!-- find_latest_by_tasks-method -->

    
      <div id="method-c-find_not_committed_by_task_user_and_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_not_committed_by_task_user_and_range</span><span
            class="method-args">( range, task_id = nil, user_id = nil )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>As <a
href="WorkPacket.html#method-c-find_by_task_user_and_range">::find_by_task_user_and_range</a>,
but only counts work packets belonging to timesheets which are not
committed.</p>
          

          
          <div class="method-source-code" id="find_not_committed_by_task_user_and_range-source">
            <pre><span class="ruby-comment"># File app/models/work_packet.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_not_committed_by_task_user_and_range</span>( <span class="ruby-identifier">range</span>, <span class="ruby-identifier">task_id</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_id</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-keyword">return</span> <span class="ruby-constant">WorkPacket</span>.<span class="ruby-identifier">find_by_task_user_range_and_committed</span>(
    <span class="ruby-identifier">range</span>,
    <span class="ruby-keyword">false</span>,
    <span class="ruby-identifier">task_id</span>,
    <span class="ruby-identifier">user_id</span>
  )
<span class="ruby-keyword">end</span></pre>
          </div><!-- find_not_committed_by_task_user_and_range-source -->
          
        </div>

        

        
      </div><!-- find_not_committed_by_task_user_and_range-method -->

    
    </section><!-- public-class-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

